<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "http://xml.resource.org/authoring/rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
     There has to be one entity for each item to be referenced. 
     An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"> 
<!ENTITY RFC8174 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml"> 
<!ENTITY RFC6690 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6690.xml">
<!ENTITY RFC8259 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8259.xml">
<!ENTITY RFC7231 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7231.xml">
<!ENTITY RFC8187 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8187.xml">
<!ENTITY RFC3986 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3986.xml">
<!ENTITY RFC6838 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6838.xml">
<!ENTITY RFC5646 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5646.xml">
<!ENTITY RFC8288 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8288.xml">
<!ENTITY RFC6982 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6982.xml">
]>

<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc toc="yes" ?>
<?rfc sortrefs="yes" ?>
<?rfc symrefs="yes" ?>
<rfc category="info" ipr="trust200902" docName="draft-wilde-linkset-04">
    <front>
        <title abbrev="Linkset">Linkset: Media Types and a Link Relation Type for Link Sets</title>
        <author initials="E." surname="Wilde" fullname="Erik Wilde">
            <organization/>
            <address>
                <email>erik.wilde@dret.net</email>
                <uri>http://dret.net/netdret/</uri>
            </address>
        </author>
        <author initials="H." surname="Van de Sompel" fullname="Herbert Van de Sompel">
            <organization>Data Archiving and Networked Services</organization>
            <address>
                <email>herbert.van.de.sompel@dans.knaw.nl</email>
                <uri>https://orcid.org/0000-0002-0715-6126</uri>
            </address>
        </author>
        <date day="14" month="February" year="2019"/>
        <abstract>
            <t>This specification defines two media types and a link relation type for sets of links. 
                The media types can be used to represents links in a standalone fashion, in one case in the native format used in the HTTP Link header, and in the other case in a JSON-based format. The link relation can be used to reference these kind of standalone link sets, so that a resource can indicate that additional links putting it into context are available someplace else. One typical scenario is when the number of links to put in 
                an HTTP Link header field becomes too big, and thus these links should be provided by a distinct 
                resource.</t>
        </abstract>
        <note title="Note to Readers">
            <t>Please discuss this draft on the ART mailing list (<eref target="https://www.ietf.org/mailman/listinfo/art"/>).</t>
            <t>Online access to all versions and files is available on GitHub (<eref target="https://github.com/dret/I-D/tree/master/linkset"/>).</t>
        </note>
    </front>
    <middle>
        <section title="Introduction" anchor="introduction">
            <t>Resources on the Web often convey typed Web Links <xref target="RFC8288"/> 
               as a  part of resource representations, for example, using the &lt;link&gt; 
               element for HTML representations, or the "Link" header field in HTTP response 
               headers for representations of any media type. In some cases, however, 
               providing links by value is impractical or impossible. 
               In these cases, an approach to provide links by reference (instead of by value) 
               can solve the problem.</t> 
            <t>To that end, this specification defines two document formats and associated media types 
               to represent a set of links. It also defines the "linkset" relation type that a 
               resource can use to support discovery of another resource that conveys 
               links in which the former resource participates.</t>
        </section>
        <section title="Terminology" anchor="terminology">
            <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they appear in all capitals, as shown here.</t>
            <t>This specification uses the terms "link context" and "link target" as defined in 
                <xref target="RFC8288"/>. 
                (These terms respectively correspond with "Context IRI" and "Target IRI" as used in RFC 8288
                <xref target="RFC8288"/>). Although defined as IRIs, in common scenarios they are also URIs.</t> 
            <t>Additionally, this specification uses the following terms for types of resources involved 
                in providing links by reference:</t> 
            <t><list style="symbols">
                <t>A "link set resource" is a resource that conveys a set of links. <xref target="linkset-formats"/> 
                   defines two representations for a set of links, based on the abstract link model defined in 
                    <xref target="RFC8288"/>.</t>
                <t>An "origin resource" is a resource that participates in one or more links provided 
                   by a link set resource. An origin resource can support discovery of an associated 
                   link set resource by using the relation type defined in <xref target="linkset-link-relation"/>.
                   As such, from the perspective of the origin resource, the links conveyed by the link set resource 
                   are provided by reference.</t>
            </list></t>
        </section>
        <section title="Scenarios" anchor="scenarios">
            <t>The following sections outline some scenarios in which it is useful to have the ability to
                separate resources from the links that pertain to them.</t>
            <t>These are all scenarios in which providing links by reference is advantageous or necessary. 
                It is important to keep in mind that, when providing some links by reference, 
                some/other links can still be provided by value.</t>
            <section title="Third-Party Links" anchor="third-party">
                <t>In some cases, it is useful that links pertaining to an origin resource are provided 
                    by a server other than the one that hosts the origin resource. For example, this allows:</t>
                <t><list style="symbols">
                    <t>Providing links in which the origin resource is involved not just as link context but 
                        also as link target.</t> 
                    <t>Providing links pertaining to the origin resource that the server hosting that 
                        resource is not aware of.</t>
                    <t>External management of links pertaining to the origin resource in a special-purpose link
                        management service.</t>
                </list></t>
                <t>In such cases, a third-party link set resource provides links pertaining to the origin resource. 
                    This link set resource may be managed by the same custodian as the origin resource, or by a third party.</t>
                <t>In order for the server hosting the origin resource to provide an up-to-date and complete set of links 
                    in which the origin resource participates, 
                    the server would need to obtain the links from the link set resource, 
                    and embed them in the origin resource's 
                    representations prior to responding to a client. Doing so would increase latency and load, 
                    which may be unnecessary if a client is not intent on consuming these links. Providing links by reference, 
                    instead of by value, removes the server-to-server communication and resulting overhead required to obtain
                    links. Instead, the consumer of the origin resource can decide if they need the additional links as context
                    for the resource.</t>
            </section>
            <section title="Challenges Writing to HTTP Link Header Field" anchor="header-writing">
                <t>In some cases, it is not straightforward to write links to the HTTP Link header field
                    from an application. This can, for example, be the case because not all 
                    required link information is available to the application or because the 
                    application does not have the capability to directly write HTTP headers. 
                    In such cases, providing links by reference can be a solution because 
                    a link to a link set resource associated with an origin resource 
                    can typically be added by means 
                    of a web server rewrite rule that leverages the resource's URI.</t>
            </section>
            <section title="Large Number of Links" anchor="link-volume">
                <t>When conveying links in the HTTP "Link" header, it is possible for the size of the HTTP 
                    response header to become unpredictable. This can be the case when links are determined 
                    dynamically dependent on a range of contextual factors. It is possible to statically configure 
                    a web server to correctly handle large HTTP response headers by specifying an upper boundary 
                    for their size. But when the number of links is 
                    unpredictable, estimating a reliable upper boundary is challenging.</t>
                <t>HTTP <xref target="RFC7231"/> defines error codes related to excess communication 
                    by the user agent ("413 Request Entity Too Large" and "414 Request-URI Too Long"), but no specific
                    error codes are defined to indicate that response header content exceeds the upper boundary that can 
                    be handled by the server, and thus it has been truncated.
                    As a result, applications take counter measures aimed at controlling 
                    the size of the HTTP "Link" header, for example by limiting the links they provide to those 
                    with select relation types, thereby limiting the value of the HTTP "Link" header to clients. 
                    Providing links by reference, instead of by value, overcomes challenges related to the unpredictable 
                    nature of the extent of HTTP "Link" headers.</t>
                <t>In more extreme scenarios it is conceivable that the number of links pertaining to the 
                    origin resource becomes so large that the response from the associated link set resource becomes too large. 
                    This could be the case for highly popular origin resources, when the link set includes 
                    links in which the origin resource participates as both link context and link target.
                    In such cases, the link set resource 
                    could deliver responses incrementally, for example, using a paged resource model that clients 
                    can consume as required.</t>
            </section>
        </section>
        <section title="Document Formats for Link Sets" anchor="linkset-formats">
            <t>Link set resources can be represented by serializations that support 
                conveying both link contexts and link targets. 
                This section specifies two document formats based on the abstract model  
                specified in Section 2 of <xref target="RFC8288"/> 
                that defines a link as consisting of a "link context", a "link relation type", a "link target", 
                and optional "target attributes". In those terms, a link set resource 
                is a resource that conveys a collection of one or more such links.</t>
                <t>The format defined in <xref target="linkset-native"/> is near identical to the payload 
                    of the HTTP Link header as specified in <xref target="RFC8288"/>.</t>
                <t>The format defined in <xref target="linkset-json"/> is based on JSON and thus
                does not have the character encoding limitations of HTTP header fields.</t>
            <section title="HTTP Link Document Format: application/linkset" anchor="linkset-native">
                <t>This document format is near identical to the payload of the 
                    HTTP Link header as defined in Section 3 of 
                    <xref target="RFC8288"/>, more specifically by  
                    its ABNF production rule for &quot;Link&quot; and subsequent ones. 
                    In order to support use cases where link set documents are used 
                    outside the context of an HTTP interaction,  
                    the following constraints are imposed on that format:</t>
                <t><list style="symbols">
                    <t>For every link provided by the link set, the link context MUST 
                        explicitly be provided using the "anchor" attribute.</t>
                    <t>The URIs of the link context ("anchor" attribute) and link target 
                        ("href" attribute) MUST be absolute URIs as defined in Section 4.3 
                        of <xref target="RFC3986"/>.</t>
                </list></t>
                   <t>The assigned media type for this format is &quot;application/linkset&quot;.</t>
            </section>
            <section title="JSON Document Format: application/linkset+json" anchor="linkset-json">
                <t>This document format uses JSON <xref target="RFC8259"/> as the syntax to represent 
                    a set of typed links. It is described in this 
                    section. The assigned media type for this format is &quot;application/linkset+json&quot;.</t>
                
                <t>The serialization was designed such that it can directly be used as the 
                    content of a JSON-LD serialization by adding an appropriate context. 
                    <xref target="appendix-1"/> shows an example of a possible context that, when added to the 
                    a JSON serialization, allows it to be interpreted as RDF.</t>
                
                <section title="Link Sets" anchor="linkset-in-json">
                    <t>In the JSON representation of a link set:</t>
                    <t><list style="symbols">
                        <t>A link set MUST be represented as a JSON object, which MUST have "linkset" as its sole member.</t>
                        <t>The "linkset" member is an array in which a distinct JSON object - 
                            the &quot;link context object&quot; (see <xref target="linkset-json-link-context-object"/>) - 
                            MUST be used to represent links that have the same link context. 
                            </t>
                        <t>Even if there is only one link context object, it MUST be wrapped in an array. 
                            Members other than link context objects MUST NOT be included 
                            in this array.</t> 
                    </list></t>
                </section>
                
                <section title="Link Context Object" anchor="linkset-json-link-context-object">
                    <t>In the JSON representation, one or more links that have the same link context,  
                        are represented by a JSON object, the link context object. A link context object 
                        adheres to the following rules:</t>
                    <t><list style="symbols"> 
                        <t>Each link context object MUST have an "anchor" member with a value that represents 
                            the link context. This value MUST be an absolute URI  
                            as defined in Section 4.3 of <xref target="RFC3986"/>.</t>
                        <t>For each distinct relation type that the link context has with link targets, 
                            a link context object MUST have an additional member. 
                            This member is an array in which a distinct JSON object 
                            - the &quot; link target object&quot; (see <xref target="linkset-json-link-target-object"/>) - 
                            MUST be used for each link target for which the relationship with 
                            the link context (value of the encompassing anchor member) applies. The name 
                            of this member expresses the relation type of the link as follows:</t>
                            <t><list style="symbols">
                                <t>For registered relation types <xref target="RFC8288"/>, 
                                    the name of this member is the registered name of the relation type.</t>
                                <t>For extension relation types <xref target="RFC8288"/>, 
                                    the name of this member is the URI that uniquely represents the relation type.</t>
                            </list></t>
                        <t>Even if there is only one link target object, it MUST be wrapped in an array. 
                            Members other than link target objects MUST NOT be included 
                            in this array.</t> 
                    </list></t>
                </section>
                
                <section title="Link Target Object" anchor="linkset-json-link-target-object">
                    <t>In the JSON representation, a link target is represented by a JSON object, the link target object. 
                        A link target object adheres to the following rules:</t>
                    <t><list style="symbols">
                        <t>Each link target object MUST have an "href" member with a value that represents 
                            the link target. This value MUST be an absolute URI  
                            as defined in Section 4.3 of <xref target="RFC3986"/>.</t>
                    <t>In many cases, a link target is further qualified by attributes, 
                        either defined by the serialization of <xref target="RFC8288"/> 
                        or extension attributes defined and used by communities. 
                        These attributes are conveyed as additional members of the link target object, 
                        as detailed in <xref target="json-target-attributes-existing"/>,  
                        <xref target="linkset-json-i18n-link-parameter"/>, and <xref target="json-target-attributes-extension"/>.</t>
                    </list></t>
                        
                    <t>Note that the JSON representation does not use the &quot;rel&quot; or 
                        &quot;rev&quot; constructs used by <xref target="RFC8288"/> and the above 
                        specified HTTP Link document format. Rather:</t> 
                    <t><list style="symbols">
                        <t>A link that uses the &quot;rel&quot; construct 
                            in those approaches is conveyed using the URI of the link context as the value for &quot;anchor&quot; 
                            and the URI of the link target as the value for &quot;href&quot;.</t>
                        <t>A link that uses the &quot;rev&quot; construct 
                            in those approaches is conveyed using the URI of the link target as the value for &quot;anchor&quot; 
                            and the URI of the link context as the value for &quot;href&quot;.</t>
                    </list></t>
  
                    <t>The following example of a JSON-serialized link set represents one
                        link with its core components: link context, link relation
                        type, and link target.</t>
  
                    <figure>
                        <artwork align="left" type="JSON"><![CDATA[                          
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "next": [
              {"href": "http://example.com/foo"}
        ]
      } 
    ]
}]]>
                        </artwork> 
                    </figure>
                    
                    <t>The following example of a JSON-serialized link set represents two links 
                        that share link context and relation type but have different link targets.
                     </t>
                    
                    <figure>
                        <artwork align="left" type="JSON"><![CDATA[
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "item": [
              {"href": "http://example.com/foo1"},
              {"href": "http://example.com/foo2"}
        ]
      } 
    ]
}]]>                          

                        </artwork> 
                    </figure>
                    
                    <t>The following example shows a link set that represents two links, each with 
                    a different link context, link target, and relation type. 
                    One relation type is registered, the other 
                    is an extension relation type.</t>
                    <figure>
                        <artwork align="left" type="JSON"><![CDATA[
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "next": [
              {"href": "http://example.com/foo1"}
        ]
      },
      { "anchor":"http://example.net/boo",
        "http://example.com/relations/baz" : [
              {"href": "http://example.com/foo2"}
        ]
      } 
    ]
}]]>  
                        </artwork> 
                    </figure>
                        
                </section>
                
                <section title="Link Target Attributes" anchor="json-target-attributes">              
                        
                    <t>In many cases, a link is further qualified by target attributes,
                        either defined by the serialization of <xref target="RFC8288"/> or extension
                        attributes defined and used by communities.</t>
                        
                    <section title="Target Attributes Defined by RFC 8288" anchor="json-target-attributes-existing">
                        <t>RFC 8288 defines the following target attributes that may be used to annotate links: 
                            "hreflang", "media", "title", "title*", and "type";  
                            these target attributes follow different occurrence and value patterns.  
                            In the JSON representation, these attributes MUST be conveyed as additional 
                            members of the link target object as follows:</t>
                        <t><list style="symbols">
                            <t>"hreflang": The optional and repeatable "hreflang" target attribute 
                                MUST be represented by an array (even if there only is one value to be represented), 
                                and each value in that array MUST be a string - representing one value 
                                of the "hreflang" target attribute for a link - which follows the same 
                                model as in the <xref target="RFC8288"/> syntax.</t>
                            <t>"media": The optional and not repeatable "media" target attribute MUST be 
                                represented by a "media" member 
                                in the link target object, and its value MUST be a string that follows the 
                                same model as in the <xref target="RFC8288"/> syntax.</t>
                            <t>"type": The optional and not repeatable "type" target attribute MUST be represented by a "type" member 
                                in the link target object, and its value MUST be a string that follows the 
                                same model as in the <xref target="RFC8288"/> syntax.</t>
                            <t>"title": The optional and not repeatable "title" target attribute MUST be represented by a "title" 
                                member in the link target object, and its value MUST be a string that follows 
                                the same model as in the <xref target="RFC8288"/> syntax.</t>
                            <t>"title*": The optional and not repeatable "title*" target attribute 
                                is motivated by character encoding 
                                and language issues and follows the model defined in <xref target="RFC8187"/>. 
                                The details of the JSON 
                                representation that applies to title* are described in 
                                <xref target="linkset-json-i18n-link-parameter"/>. 
                            </t>
                        </list></t>
                    

                    
 
                    
                    
                        <t>The following example illustrates how the repeatable "hreflang" and the 
                            not repeatable "type" target attributes are represented in a link target object.</t>
                        <figure>
                            <artwork align="left" type="JSON"><![CDATA[                              
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "next": [
              {"href": "http://example.com/foo",
               "type"     : "text/html",
               "hreflang" : [ "en" , "de" ]
              }
        ]
      } 
    ]
}]]>
                            </artwork> 
                        </figure>
                        
                    </section>
                    <section title="Internationalized Target Attributes" anchor="linkset-json-i18n-link-parameter">
                        <t>In addition to the target attributes described in <xref target="json-target-attributes-existing"/>,  
                            <xref target="RFC8288"/> also supports 
                            attributes that follow the content model of <xref target="RFC8187"/>. 
                            In <xref target="RFC8288"/>, these target 
                            attributes are recognizable by the use of a trailing asterisk in the attribute name, 
                            such as "title*". 
                            The content model of <xref target="RFC8187"/> uses a string-based microsyntax 
                            that represents the character encoding, an optional language tag,
                            and the escaped attribute value encoded according to the specified character encoding.</t>
                        <t>The JSON serialization for these target attributes MUST be  
                            as follows:</t>
                        <t><list style="symbols">    
                            <t>An internationalized target attribute is represented as a member of the link context object with 
                                the same name (including the *) of the attribute.</t>
                            <t>The character encoding information   
                                as prescribed by <xref target="RFC8187"/> is not preserved; instead, the 
                                content of the internationalized attribute is represented in the character encoding used for the JSON link set.</t>
                            <t>The value of the internationalized target attribute is an 
                                array that contains one or more JSON objects.The name of the first member 
                                of such JSON object is "value" 
                                and its value is the actual content (in its unescaped version) of the internationalized target attribute, i.e. the 
                                value of the attribute from which 
                                the encoding and language information are removed. 
                                The name of the optional second member of such JSON object is "language" and 
                                its value is the language tag <xref target="RFC5646"/> 
                                for the language in which the attribute content is conveyed.
                            </t>
                        </list></t>
                        <t>The following example illustrates how the "title*" target attribute 
                            defined by <xref target="RFC8288"/> is represented in a link target object.</t>
                        <figure>
                            <artwork align="left" type="JSON"><![CDATA[
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "next": [
              {"href": "http://example.com/foo",
               "type"     : "text/html",
               "hreflang" : [ "en" , "de" ],
               "title" : "Next chapter",
               "title*" : [ { "value": "nachstes Kapitel" , "language" : "de" } ]
              }
        ]
      } 
    ]
}]]>                                
                            </artwork> 
                        </figure>
                        <t>The above example assumes that the German title contains an umlaut character (which in the native syntax would be encoded as title*=UTF-8'de'n%c3%a4chstes%20Kapitel), which gets encoded in its unescaped form (but not shown here due to the limitations of RFC publication) in the JSON representation. Implementations MUST properly decode/encode internationalized target attributes that follow the model of <xref target="RFC8187"/> when transcoding between the native and the JSON syntax.</t>
                    </section>
               
                <section title="Extension Target Attributes" anchor="json-target-attributes-extension">
                    <t>Extension target attributes are attributes that are not defined by RFC 8288 
                        (as listed in <xref target="json-target-attributes-existing"/>), but are nevertheless 
                        used to qualify links. 
                        They can be defined by communities in any way deemed necessary, and it is up to them 
                        to make sure their usage is understood by target applications. 
                        However, lacking standardization, there is no interoperable 
                        understanding of these extension attributes. One important consequence is that 
                        their cardinality is unknown to generic applications. Therefore, in the JSON serialization, 
                        all extension target attributes are treated as repeatable.</t>
                    <t>The JSON serialization for these target attributes MUST be  
                        as follows:</t>
                    <t><list style="symbols"> 
                        <t>An extension target attribute is represented as a member of the link context object with the same name (including the *, if applicable) of the attribute.</t>
                        <t>The value of an extension attribute MUST be represented by an array, even if there only is one value to be represented.</t>
                        <t>If the extension target attribute does not have a name with a trailing asterisk,  
                            then each value in that array MUST be a string that represents one value 
                            of the attribute.</t>
                        <t>If the extension attribute has a name with a trailing asterisk 
                            (it follows the content model of <xref target="RFC8187"/>),  
                            then each value in that array MUST be a JSON object. The value of each such JSON object  
                            MUST be structured as described in <xref target="linkset-json-i18n-link-parameter"/>.</t>
                    </list></t>
                    
                    <t>The example shows a link target object with three extension target attributes. The value for each extension target attribute is an array. The two first are regular extension target attributes, with the first one ("foo") having only one value and the second one ("bar") having two.
                        The last extension target attribute ("baz*") follows the naming rule of <xref target="RFC8187"/> and therefore is encoded according to the serialization described in  <xref target="linkset-json-i18n-link-parameter"/>. </t>
        
                    <figure>
                        <artwork align="left" type="JSON"><![CDATA[
{
  "linkset":
    [ 
      { "anchor":"http://example.net/bar", 
        "next": [
              {"href": "http://example.com/foo",
               "type"     : "text/html",
               "foo" : [ "foovalue" ],
               "bar" : [ "barone", "bartwo" ], 
               "baz*" : [ { "value": "bazvalue" , "language" : "en" } ]
              }
        ]
      } 
    ]
}]]>                               
                        </artwork> 
                    </figure>
                </section>
            </section>
            </section>
        </section>
        
        <section title="The &quot;linkset&quot; Relation Type for Linking to Link Sets" anchor="linkset-link-relation">
            <t>The target of a link with the "linkset" relation type - the link set resource - provides a set of links, 
                including links in which the link context - the origin resource - participates.</t>
            <t>A link with the "linkset" relation type MAY be provided in the header and/or 
                the body of the origin resource's representation. It may also be discovered by other means, such as through
                client-side information.</t>
            <t>More than one link with a "linkset" relation type MAY be provided. 
                Multiple such links can refer to the same set of links expressed using different 
                representations, or to different sets of links (potentially provided by different services).</t> 
             <t>The use of a link with the "linkset" relation 
                type does not preclude the provision of links with other relation types, 
                i.e. the origin resource can provide typed links other than a "linkset" link. Therefore, the
                effective set of links pertaining to the origin resource is the union of the links that the
                resource itself provides, and of all links - provided by the link set resource - 
                in which it participates.</t>
            <t>The link set resource MAY provide the links that pertain to the origin resource 
                 in its HTTP response header and/or body.</t> 
            <!--
            <t>In common scenarios (the origin resource is distinct from the 
                link set resource), it is essential for link set representations to 
                make the URI of the origin resource explicit for those links in 
                which the origin resource acts as link context.</t>
                -->
            <t>A user agent that follows a "linkset" link from an origin resource 
                MUST be aware that the link set resource can provide links in which the 
                origin resource does not participate and MAY decide to ignore those links.</t>
            <t>There is no constraint on the target URI of a link with the "linkset" relation type;
                designing and using these URIs is left to the discretion of implementers.</t>
             <t>If an origin resource provides a "linkset" link pointing at a link set resource, 
                and that link set resource provides a "linkset" link in turn, 
                then this latter link points at links pertaining to the link set resource. 
                This means that in the context of the latter link, the link set resource is an origin
                resource. This means that linkset relations are not transitive, and it is up to a client
                to decide whether they follow "nested chains" of "linkset" links or not.</t>
            
            <!--
                <t><list style="symbols">
                    <t>In cases where the link set resource provides these links 
                        in its Link HTTP response header, the payload of that header MUST comply with the 
                        syntax defined in Web Linking <xref target="RFC8288"/>. The media type of the response 
                        body is not constrained.</t>
                    <t>In cases where the link set resource provides these links 
                        in its response body, the body 
                        SHOULD allow a client to determine the source and target of 
                        each provided link. The media type of the response 
                        body is otherwise not constrained.</t>
                </list></t>
                -->
            
        </section>
        
         <section title="Examples" anchor="linkset-link-examples">
              <t>Sections <xref target="linkset-link-link-format"/> and <xref target="linkset-link-json-format"/>
              show examples whereby the link set resource provides links pertaining to the origin resource, 
              in its response header and body, respectively.
              </t>
           <section title="Links Provided in the Header of the Link Set Resource" anchor="linkset-link-link-format">
               <t><xref target="Request1"/> shows a client issuing an 
                   HTTP head request against origin resource http://example.org/resource1.</t>
               
               <figure title="Client HTTP HEAD Request" align="center" anchor="Request1">
                   <artwork align="left"><![CDATA[
HEAD /resource1 HTTP/1.1
Host: example.org
Connection: close
]]>
                   </artwork> 
               </figure>
               
               <t><xref target="Response1.1"/> shows the response to the HEAD request of 
             <xref target="Request1"/>. The response contains a Link header with  
             a link that uses the "linkset" relation type. It indicates that links pertaining to the 
             origin resource are provided 
             by link set resource http://example.com/links?uri=http%3A%2F%2Fexample.org%2Fresource.
             </t>
              <figure title="Response to HTTP HEAD on Origin Resource" align="center" anchor="Response1.1">
                <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:37:51 GMT
Server: Apache-Coyote/1.1
Link: <http://example.com/links?uri=http%3A%2F%2Fexample.org%2Fresource>
      ; rel="linkset"
      ; type="text/html"
Content-Length: 5214
Content-Type: text/html;charset=utf-8
Connection: close
]]>
                </artwork> 
              </figure>
               <t>While in this example the URI of the link set resource uses a pattern that represents the URI
                   of the origin resource, this is opaque to the client, which simply uses the target URI 
                   to access the link set resource.</t>
                <t><xref target="Request2"/> shows the client issuing an HTTP GET 
                    request against the link set resource provided in <xref target="Response1.1"/>. 
                </t>
                <figure title="Client HTTP GET against the Link Set Resource" align="center" anchor="Request2">
                    <artwork align="left"><![CDATA[
GET /links?uri=http%3A%2F%2Fexample.org%2Fresource HTTP/1.1
Host: example.com
Connection: close
]]>
                    </artwork> 
                </figure>
               <t><xref target="Response2.1"/> shows the response headers to the HTTP GET request of <xref target="Request2"/>. 
                   The links pertaining to the origin resource are provided in the Link response header of the 
                   link set resource. 
                   As required by the serialization rules provided in <xref target="linkset-native"/>, 
                   the link context is always provided (anchor attribute), and the URI references for both 
                   link context and link target are absolute URIs. 
                   Note that most, but not all, links have the origin resource as link context.
                   </t>
                <figure title="Response to HTTP GET against the Link Set Resource" align="center" anchor="Response2.1">
                    <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:40:02 GMT
Server: Apache-Coyote/1.1
Link: <http://authors.example.net/johndoe>
   ; rel="author"
   ; type="application/rdf+xml"
   ; anchor="http://example.org/resource1",
 <http://authors.example.net/janedoe>
   ; rel="author"
   ; type="application/rdf+xml"
   ; anchor="http://example.org/resource1",
 <http://example.org/resource1/items/AF48EF.pdf>
   ; rel="item"
   ; type="application/pdf"
   ; anchor="http://example.org/resource1",
 <http://example.org/resource1/items/CB63DA.html>
   ; rel="item"
   ; type="text/html"
   ; anchor="http://example.org/resource1",
 <http://example.org/resource1>
   ; rel="latest-version"
   ; anchor="http://example.org/resource41/"
Content-Type: text/html
Content-Length: 3018
]]></artwork> 
                </figure>
            </section>
             <section title="Links Provided in the Body of the Link Set Resource, 
                 Link Set Serialized as application/linkset+json" anchor="linkset-link-json-format">
                 <t><xref target="Request3"/> is an example of a client issuing an 
                     HTTP head request against origin resource 
                     http://example.org/article/view/7507</t>
                 
                 <figure title="Client HTTP HEAD Request" align="center" anchor="Request3">
                     <artwork align="left"><![CDATA[
HEAD article/view/7507 HTTP/1.1
Host: example.org
Connection: close
]]>
                     </artwork> 
                 </figure>
                 <t><xref target="Response3.1"/> shows the response to the HEAD request of 
                     <xref target="Request3"/>. The response contains a Link header with  
                     a link that has the "linkset" relation type. It indicates that links pertaining to the 
                     origin resource are provided 
                     by link set resource http://example.com/links/article/7507, which 
                     provides a representation with media type application/linkset+json.
                 </t>
                 <figure title="Response to HTTP HEAD on Origin Resource" align="center" anchor="Response3.1">
                     <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:37:51 GMT
Server: Apache-Coyote/1.1
Link: <http://example.com/links/article/7507>
      ; rel="linkset"
      ; type="application/linkset+json"
Content-Length: 236
Content-Type: text/html;charset=utf-8
Connection: close
]]>
                     </artwork> 
                 </figure>
                 <t>In this example, the URI of the linkset resource does not directly represent the URI of
                     the origin resource anymore. There still is an association possible through the use of a 
                     URI pattern
                     that is includes identifying information. But as in the example above, the URI of the 
                     link set resource is opaque
                     to the client that simply accesses the URI to retrieve the link set resource.</t>
                 <t><xref target="Request4"/> shows the client issuing an HTTP GET 
                     request against the link set resource provided in <xref target="Response3.1"/>. 
                 </t>
                 <figure title="Client HTTP GET against the Link Set Resource" align="center" anchor="Request4">
                     <artwork align="left"><![CDATA[
GET links/article/7507 HTTP/1.1
Host: example.com
Accept: application/linkset+json
Connection: close
]]></artwork> 
                 </figure>
                 <t><xref target="Response4.1"/> shows the response headers to the HTTP GET request of <xref target="Request4"/>. 
                     The links pertaining to the origin resource are provided in the response body of the link set resource 
                     and are serialized according to the media type application/linkset+json. 
                 </t>
                 <figure title="Response to HTTP GET against the Link Set Resource" align="center" anchor="Response4.1">
                     <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Mon, 28 Nov 2016 14:40:02 GMT
Server: Apache-Coyote/1.1
Content-Type: application/linkset+json
Content-Length: 735

{
  "linkset": [
    {
      "anchor": "https://example.org/article/view/7507",
      "author": [
        {
          "href": "https://orcid.org/0000-0002-4311-0897",
          "type": "rdf/xml"
        }
      ],
      "item": [
        {
          "href": "https://example.org/article/7507/item/1",
          "type": "application/pdf"
        },
        {
          "href": "https://example.org/article/7507/item/2",
          "type": "text/csv"
        }
      ],
      "cite-as": [
        {
          "href": "https://doi.org/10.841/zk2557"
        }
      ]
    },
    {
      "anchor": "https://example.com/links",
      "alternate": [
        {
          "href": "https://mirror.example.com/links"
        }
      ]
    }
  ]
}]]> 
</artwork> 
                 </figure>
                 <!--
                 <t>If <xref target="Response3.1"/> would have provided a link to 
                 a link set with media type application/linkset, and if the client would have 
                 requested that link set, then the body of the response would have been 
                 similar to <xref target="Response4.1"/>. But it would have had application/linkset as 
                     Content-Type, the payload of the HTTP Link header of <xref target="Response2.1"/> as body, 
                     and an accordingly adjusted value for Content-Length.</t>
                     -->
            </section>
        </section>
        <section title="Implementation Status" anchor="implementation-status">
            <t>Note to RFC Editor: Please remove this section before publication.</t>
            <t>This section records the status of known implementations of the protocol defined by this specification at the time of posting of this Internet-Draft, and is based on a proposal described in RFC 6982 <xref target="RFC6982"/>. The description of implementations in this section is intended to assist the IETF in its decision processes in progressing drafts to RFCs. Please note that the listing of any individual implementation here does not imply endorsement by the IETF. Furthermore, no effort has been spent to verify the information presented here that was supplied by IETF contributors. This is not intended as, and must not be construed to be, a catalog of available implementations or their features. Readers are advised to note that other implementations may exist.</t>
            <t>According to RFC 6982, "this will allow reviewers and working groups to assign due consideration to documents that have the benefit of running code, which may serve as evidence of valuable experimentation and feedback that have made the implemented protocols more mature. It is up to the individual working groups to use this information as they see fit".</t>
            <section title="Open Journal Systems (OJS)" anchor="implementation-ojs">
                <t>Open Journal Systems (OJS) is an open-source software for the management of peer-reviewed academic journals, and is created by the Public Knowledge Project (PKP), released under the GNU General Public License. Open Journal Systems (OJS) is a journal management and publishing system that has been developed by PKP through its federally funded efforts to expand and improve access to research.</t>
                <t>The OJS platform has implemented linkset support as an alternative way to provide links when there are more than a configured limit (they consider using about 10 as a good default, for testing purpose it is currently set to 8).</t>
            </section>
        </section>
            <section title="IANA Considerations" anchor="iana-considerations">
            <section title="Link Relation Type: linkset">
                <t>The link relation type below has been registered by IANA per Section 6.2.1 of Web Linking <xref target="RFC8288"/>:</t>
                <t>
                    <list>
                        <t>Relation Name: linkset</t>
                        <t>Description: The Target IRI of a link with the "linkset" relation type 
                            provides a set of links that pertain to the Context IRI of the link.</t>
                        <t>Reference: [[ This document ]]</t>
                    </list>
                </t>
            </section>
            <section title="Media Type: application/linkset">
                <section title="IANA Considerations" anchor="iana">
                    <t>The Internet media type <xref target="RFC6838"/> for a natively encoded link set is application/linkset.</t>
                    <t>
                        <list>
                            <t>Type name: application</t>
                            <t>Subtype name: linkset</t>
                            <t>Required parameters: none</t>
                            <t>Optional parameters: none</t>
                            <t>Encoding considerations: ...</t>
                            <t>Security considerations: ...</t>
                            <t>Interoperability considerations: ...</t>
                            <t>Published specification: [[ This document ]]</t>
                            <t>Applications that use this media type: ...</t>
                            <t>Additional information:
                                <list>
                                    <t>Magic number(s): N/A</t>
                                    <t>File extension(s): This media type does not propose a specific extension.</t>
                                    <t>Macintosh file type code(s): TEXT</t>
                                </list>
                            </t>
                            <t>Person &amp; email address to contact for further information: Herbert Van de Sompel &lt;herbertv@lanl.gov></t>
                            <t>Intended usage: COMMON</t>
                            <t>Restrictions on usage: none</t>
                            <t>Author: Herbert Van de Sompel &lt;herbertv@lanl.gov></t>
                            <t>Change controller: IETF</t>
                        </list>
                    </t>
                </section>
            </section>
            <section title="Media Type: application/linkset+json">
                <t>The Internet media type <xref target="RFC6838"/> for a JSON-encoded link set is application/linkset+json.</t>
                <t>
                    <list>
                        <t>Type name: application</t>
                        <t>Subtype name: linkset+json</t>
                        <t>Required parameters: none</t>
                        <t>Optional parameters: none</t>
                        <t>Encoding considerations: ...</t>
                        <t>Security considerations: ...</t>
                        <t>Interoperability considerations: ...</t>
                        <t>Published specification: [[ This document ]]</t>
                        <t>Applications that use this media type: ...</t>
                        <t>Additional information:
                            <list>
                                <t>Magic number(s): N/A</t>
                                <t>File extension(s): JSON documents often use ".json" as the file extension, and this media type does not propose a specific extension other than this generic one.</t>
                                <t>Macintosh file type code(s): TEXT</t>
                            </list>
                        </t>
                        <t>Person &amp; email address to contact for further information: Herbert Van de Sompel &lt;herbertv@lanl.gov></t>
                        <t>Intended usage: COMMON</t>
                        <t>Restrictions on usage: none</t>
                        <t>Author: Herbert Van de Sompel &lt;herbertv@lanl.gov></t>
                        <t>Change controller: IETF</t>
                    </list>
                </t>
            </section>
        </section>
        <section title="Security Considerations" anchor="security-considerations">
            <t>...</t>
        </section>
    </middle>
    <back>
        <references title="Normative References">
&RFC2119; 
&RFC8174; 
&RFC8259;
&RFC7231;
&RFC8288;
&RFC8187;
&RFC3986;
&RFC6838;
&RFC5646;
&RFC6982;
            
            <!--
            <reference anchor="W3C.REC-html401-19991224">
                <front>
                    <title abbrev="Media Queries">Media Queries</title>
                    <author initials="F." surname="Rivoal" fullname="Florian Rivoal"/>
                    <date month="June" year="2012"/>
                </front>
                <seriesInfo name="World Wide Web Consortium" value="Recommendation REC-css3-mediaqueries-20120619"/>
            </reference>
-->
            <!--
            <reference anchor="RFC6690">
                <front>
                    <title>Constrained RESTful Environments (CoRE) Link Format</title>
                    <author initials="Z." surname="Shelby" fullname="Zach Shelby"/>
                    <date month="August" year="2012"/>
                </front>
                <seriesInfo name="RFC" value="6690"/>
            </reference>
-->
        </references>
<!--
      <references title="Informative References">
      </references>
 -->     

      <section title="Acknowledgements">
         <t>Thanks for comments and suggestions provided by Mark Nottingham, Stian Soiland-Reyes, Sarven Capadisli, ...</t>
      </section>
        
        <section title="JSON-LD Context" anchor="appendix-1">
            <t>When adding the below context to the representation of a link set rendered according to the 
                JSON serialization defined in <xref target="linkset-json"/>, it can be interpreted as RDF.</t>
            
            <figure title="Context for JSON-LD that could be used with the JSON serialization" anchor="json-context">
                <artwork align="left"><![CDATA[
{
  "@context": [
    {
      "@vocab": "https://www.iana.org/assignments/link-relations/",
      "anchor": "@id",
      "href": "@id",
      "dct": "http://purl.org/dc/terms/",
      "link": "https://www.iana.org/assignments/link-relations#",
      "title": {
        "@id": "http://purl.org/dc/terms/title"
      },
      "title*": {
        "@id": "http://purl.org/dc/terms/title"
      },
      "type": {
        "@id": "dct:format",
        "@type": "@vocab"
      }
    },
    {
      "language": "@language",
      "value": "@value",
      "hreflang": {
        "@id": "https://www.w3.org/ns/activitystreams#hreflang",
        "@container": "@set"
      }
    }
  ]
}]]> 
                </artwork> 
            </figure>
        </section>

    </back>
</rfc>
